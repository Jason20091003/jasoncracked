<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Jason解码器</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        textarea { width: 100%; height: 80px; margin: 10px 0; }
        button { padding: 10px 20px; margin: 10px 0; }
        #result { margin-top: 20px; padding: 15px; border: 1px solid #ccc; white-space: pre-wrap; }
        .section { margin-bottom: 30px; }
    </style>
</head>
<body>

<h1>Jason解码器</h1>

<div class="section">
    <h2>1. 文本转DNA序列</h2>
    <label>输入文本（如 Ansel）：</label><br>
    <textarea id="textInput" placeholder="请输入文本...">Ansel</textarea><br>
    <button onclick="encodeToDNA()">转换为 DNA 序列</button>
</div>

<div class="section">
    <h2>2. DNA序列转文本</h2>
    <label>输入 DNA 序列（用空格分隔，如ACTG）：</label><br>
    <textarea id="dnaInput" placeholder="输入 DNA 序列...">ACTG</textarea><br>
    <button onclick="decodeFromDNA()">解码为文本</button>
</div>

<div id="result"></div>

<script>
function encodeToDNA() {
    const input = document.getElementById('textInput').value.trim();
    if (!input) {
        document.getElementById('result').innerHTML = "请输入文本！";
        return;
    }

    let binary = '';
    for (let char of input) {
        let bin = char.charCodeAt(0).toString(2);
        bin = '00000000'.substring(bin.length) + bin;
        binary += bin;
    }

    let dna = '';
    for (let i = 0; i < binary.length; i += 2) {
        const bits = binary.substring(i, i+2);
        if (bits === '00') dna += 'A';
        else if (bits === '01') dna += 'C';
        else if (bits === '10') dna += 'G';
        else if (bits === '11') dna += 'T';
    }
    let formatted = dna.match(/.{1,4}/g).join(' ');

    document.getElementById('result').innerHTML = 
        `<strong>输入文本：</strong> ${input}<br>` +
        `<strong>二进制：</strong> ${binary.match(/.{8}/g).join(' ')}<br>` +
        `<strong>DNA序列：</strong> ${formatted}`;
}
function decodeFromDNA() {
    const input = document.getElementById('dnaInput').value.trim().toUpperCase().replace(/\s+/g, '');
    if (!input || !/^[ACGT]+$/.test(input)) {
        document.getElementById('result').innerHTML = "请输入有效的 DNA 序列（仅 A/C/G/T，可带空格）！";
        return;
    }

    let binary = '';
    for (let char of input) {
        if (char === 'A') binary += '00';
        else if (char === 'C') binary += '01';
        else if (char === 'G') binary += '10';
        else if (char === 'T') binary += '11';
    }

    let text = '';
    for (let i = 0; i < binary.length; i += 8) {
        const byte = binary.substring(i, i+8);
        if (byte.length === 8) {
            const code = parseInt(byte, 2);
            text += String.fromCharCode(code);
        }
    }

    document.getElementById('result').innerHTML = 
        `<strong>输入 DNA：</strong> ${input.match(/.{1,4}/g).join(' ')}<br>` +
        `<strong>二进制：</strong> ${binary.match(/.{8}/g).join(' ')}<br>` +
        `<strong>解码文本：</strong> ${text}`;
}
</script>

</body>
</html>